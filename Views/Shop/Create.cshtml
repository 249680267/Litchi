@model LitchiServer.Models.ShopModels

@{
    ViewBag.Title = "Create";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<h2>新增店铺</h2>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>SE_Shop</legend>

        <div class="editor-label">
            店铺分类：
        </div>
        <div class="editor-field">
            @Html.DropDownList("fkShopClassifyID", String.Empty)
            @Html.ValidationMessageFor(model => model.SeShop.fkShopClassifyID)
        </div>

        <div class="editor-label">
            店铺名称
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.SeShop.nvrShopName)
            @Html.ValidationMessageFor(model => model.SeShop.nvrShopName)
        </div>

        <div class="editor-label">
            店铺描述
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.SeShop.nvrDescription)
            @Html.ValidationMessageFor(model => model.SeShop.nvrDescription)
        </div>

        <div class="editor-label">
            地理位置_纬度
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.SeShop.fltPosition_X)
            @Html.ValidationMessageFor(model => model.SeShop.fltPosition_X)
        </div>

        <div class="editor-label">
            地理位置_经度
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.SeShop.fltPosition_Y)
            @Html.ValidationMessageFor(model => model.SeShop.fltPosition_Y)
        </div>


        <div class="editor-label">
            店铺地址
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.SeShop.vrAddress)
            @Html.ValidationMessageFor(model => model.SeShop.vrAddress)
        </div>

        <div class="editor-label">
            店铺所在地区
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.SeShop.nvrArea)
            @Html.ValidationMessageFor(model => model.SeShop.nvrArea)
        </div>

        <div class="editor-label">
            联系电话
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.SeShop.vrPhone)
            @Html.ValidationMessageFor(model => model.SeShop.vrPhone)
        </div>

        <div class="editor-label">
            服务覆盖范围
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.SeShop.fltScope)
            @Html.ValidationMessageFor(model => model.SeShop.fltScope)
        </div>
        <div>营业开始时间1</div>
        <div class="editor-field">
            @Html.EditorFor(model => model.actionTime1 ,new{@class="input",@typeof="text"})
            @Html.ValidationMessageFor(model => model.actionTime1)
        </div>
        <div>营业结束时间1</div>
        <div class="editor-field">
            @Html.EditorFor(model => model.endTime1 ,new{@class="input",@typeof="text"})
            @Html.ValidationMessageFor(model => model.endTime1)
        </div>
        <div>营业开始时间2</div>
        <div class="editor-field">
            @Html.EditorFor(model => model.actionTime2 ,new{@class="input",@typeof="text"})
            @Html.ValidationMessageFor(model => model.actionTime2)
        </div>
        <div>营业结束时间2</div>
        <div class="editor-field">
            @Html.EditorFor(model => model.endTime2 ,new{@class="input",@typeof="text"})
            @Html.ValidationMessageFor(model => model.endTime2)
        </div>
        <div class="editor-label">
            店铺状态
        </div>
        <div class="editor-field">
            @Html.DropDownList("fkSEShopStatuID", "请选择")
            @Html.ValidationMessageFor(model => model.SeShop.fkSEShopStatuID)
        </div>
        @*店铺外送信息*@
        <div class="editor-label">
            起送价格
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.SeDelivery.mnyDelivery)
            @Html.ValidationMessageFor(model => model.SeDelivery.mnyDelivery)
        </div>
        <div class="editor-label">
            是否启用起送价格
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.SeDelivery.bitDelivery)
            @Html.ValidationMessageFor(model => model.SeDelivery.bitDelivery)
        </div>
        <div class="editor-label">
            外送费
        </div>
        <div class="editor-field">
            @Html.EditorFor(model=>model.SeDelivery.mnyFloorPrice)
            @Html.ValidationMessageFor(Model=>Model.SeDelivery.mnyFloorPrice)
        </div>
        <div class="editor-label">
            是否启用外送费
        </div>
        <div class="editor-field">
            @Html.EditorFor(model=>model.SeDelivery.bitISFloorPrice)
            @Html.ValidationMessageFor(Model=>Model.SeDelivery.bitISFloorPrice)
        </div>
         <div class="editor-label">
            店铺公告
        </div>
        <div class="editor-field">
            @Html.EditorFor(model=>model.SeShopShow.nvrShopNotice)
            @Html.ValidationMessageFor(Model=>Model.SeShopShow.nvrShopNotice)
        </div>

        @*上传图片 *@
        <input id="file_upload" name="file_upload" type="file" />
        <div id="div_img_list" class="xiangce_biaoqian_right_shangchuanzhaopian">
        </div>

        <p>
            <input type="submit" value="新增" />
        </p>
    </fieldset>
}

<div>
    @Html.ActionLink("返回店铺列表", "Index")
</div>

<link href="../../css/css.css" rel="stylesheet" type="text/css" />
<link rel="stylesheet" type="text/css" href="~/css/datetimepicker/jquery.datetimepicker.css" />
@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
    
    <script src="~/Scripts/datetimepicker/jquery.js"></script>
    <script src="~/Scripts/datetimepicker/jquery.datetimepicker.js"></script>
    <script src="@Url.Content("~/Scripts/uploadify/jquery.uploadify.js")" type="text/javascript"></script>
    <script type="text/javascript">
        $(function () {
            $("#file_upload").uploadify({
                queueID: "1",
                swf: '/Scripts/uploadify/uploadify.swf',
                uploader: '/Home/Upload', // 上传文件，后台上传方法
                buttonImage: "/images/xiangcebiaoqian_anniu.gif", // 按钮图片地址
                fileSizeLimit: '100000000KB', // 最大允许文件上传大小，这里是 10M
                fileTypeDesc: 'Image Files',
                fileTypeExts: '*.gif; *.jpg; *.png; *.jpeg',
                auto: true, // 自动上传
                uploadLimit: 20, // 允许文件上传个数
                queueSizeLimit: 5, // 允许同时文件上传个数
                width: 159, // 上传按钮的宽度
                height: 47, // 上传按钮的高度
                onSelect: function (file) { // 选择文件的事件
                    var name = file.name;
                    if (name.length >= 10) {
                        var index = name.lastIndexOf(".");
                        name = name.substr(0, 8) + "...." + name.substr(index + 1);
                    }
                    var html = '<div id="div_id_' + file.id + '" class="uploading"><div id="div_title_' + file.id + '" class="uploading_file_name">' + name + '<div><div id="div_uploading_' + file.id + '" class="uploading_schedule">0%</div></div>';
                    $("#div_img_list").append(html);

                },
                onUploadProgress: function (file, bytesUploaded, bytesTotal, totalBytesUploaded, totalBytesTotal) { // 上传文件的进度事件
                    var v = Math.round(bytesUploaded / bytesTotal * 100);
                    $('#div_uploading_' + file.id).html(v + "%");
                },
                onUploadSuccess: function (file, data, response) { // 上传文件成功之后的事件
                    $("#div_title_" + file.id).remove();
                    $("#div_uploading_" + file.id).remove();
                    var html = '<img alt="" src="' + data + '" />';
                    html += "<a href=\"javascript:\" onclick=\"DeleteFile('" + file.id + "');\">X</a>";
                    $("#div_id_" + file.id).html(html);
                }
            });
        });

        // 移除图片
        function DeleteFile(id) {
            $("#div_id_" + id).remove();
        }
        $('#actionTime1').datetimepicker({
            datepicker: false,
            format: 'H:i',
            step: 5
        });
        $('#endTime1').datetimepicker({
            datepicker: false,
            format: 'H:i',
            step: 5
        });
        $('#actionTime2').datetimepicker({
            datepicker: false,
            format: 'H:i',
            step: 5
        });
        $('#endTime2').datetimepicker({
            datepicker: false,
            format: 'H:i',
            step: 5
        });
    </script>
}
